# Преобразователь сайтов: версия 1 (на основе "Круглые бани")

## Как запустить

> Примечание: все перечисленное нужно сделать на системе Linux. Если у вас Windows - можно использовать Virtualbox https://www.virtualbox.org/

1. Отредактировать файл excel.xlsx (в нем хранится все данные для преобразователя)
2. Установить php (желательно версии 8.1)
3. Установить пакетный менеджер для php который называется composer https://getcomposer.org/
4. В терминале перейти в корень проекта (туда где лежит этот README файл)
5. Выполнить команду composer install
6. Запустить команду `php index.php`
7. Все :) Все сгенерированные файлы загрузились в папку build в корне проекта. Эту папку можно переименовать и закинуть на сервер. Также для удобства в корне проекта создается архива - build.zip.

## Локальная проверка

Чтобы быстро запустить проект на своем компьютере можно набрать команду:
`php -S localhost:8080 -t build/public_html/`
После ее выполнения нужно перейти в браузере на адрес: http://localhost:8080

## Если нужно изменить проект

Если появится задача немного изменить проект (например добавить новые поля в таблицу) - это несложно сделать. Логика работы php скрипта довольно проста. Чтобы ее изучить нужно открыть файл index.php. Он сопоставляет определенные ячейки в таблице excel и ложит их в переменную - $values под соответствующим названием. После этого определенный блок кода обрабатывает все файлы в директории template/ и ищет специальные последовательности символов, заместо которых он подставит значения из переменной $values.
Существует два вида таких последовательностей символов:
1. [[[! НазваниеПеременной ]]]
2. [[[? ПроизвольныйКодPHP ]]]

Наткнувшись на первую последовательность - скрипт просто подставит заместо нее значение которое хранится в переменной $values по ключу массива (переменная $values - это массив ключей).
Вторая последовательность - нужна для более сложных операций. В ней можно выполнить любой PHP код. Внутри этой конструкции можно обращаться к переменной $values напрямую. Чтобы вывести что-либо заместо этой последовательности - нужно использовать команду echo (смотрите примеры как это уже сделано в некоторых местах).

Итак если в таблице добавилось новое свойство, нужно сделать следующее:
1. В файле index.php добавить по аналогии с остальными этот ключ в переменную $values
2. Открыть папку /template и в соответствующем месте вывести этот ключ через специальные последовательности


